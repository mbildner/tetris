<html>
<head>
	<title>tetris</title>
	<script src="./public/tetris-view.js"></script>
</head>
<body>
	<canvas id="game-board" width="500" height="600"></canvas>
	<script>
		var canvas = document.getElementById('game-board');
		var nextPieceCanvas = document.getElementById('next-piece-canvas');

		var gameModel = tetris.gameModelFactory({
		  rows: 20,
		  cols: 10,
		  squareModelFactory: tetris.squareModelFactory,
		  gamePieceFactory: tetris.pieceFactory
		});

		var gameView = viewFactory({
		  canvas: canvas,
		  model: gameModel
		});

    var counter = 0;

		var controller = tetris.gameControllerFactory({
		  view: gameView,
		  model: gameModel,
		  freezePieceAfter: 2,
      manualMoveOnly: false,
      onActionTaken: function(gameBoard, currentPiece, clearedRows, done){
		  	console.log('game is done: ', done)
      }
		});

		controller.attachKeyboardInput();
		controller.start();
	</script>
</body>
</html>
